<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>orders</title>
  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
      <!-- Google Web Fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Lora:wght@600;700&display=swap" rel="stylesheet"> 
  
      <!-- Icon Font Stylesheet -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
  
      <!-- Libraries Stylesheet -->
      <link href="../lib/animate/animate.min.css" rel="stylesheet">
      <link href="../lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  
      <!-- Customized Bootstrap Stylesheet -->
      <link href="../css/bootstrap.min.css" rel="stylesheet">
  
      <!-- Template Stylesheet -->
      <link href="../css/style.css" rel="stylesheet">
      <link href="../css/style2.css" rel="stylesheet">
      <style>
       
      </style>
</head>
<body style="background-image: url(../img/background.PNG);  background-repeat: repeat-x;">

 <!-- Navbar Start -->
    <div class="container-fluid fixed-top px-0 wow fadeIn" data-wow-delay="0.1s">
      <div class="top-bar row gx-0 align-items-center d-none d-lg-flex">
          <div class="col-lg-6 px-5 text-start">
            <small><i class="fa fa-map-marker-alt me-2"></i> UK,London,Westminister</small>
            <small class="ms-4"><i class="fa fa-envelope me-2"></i>xyz</small>
          </div>
          <div class="col-lg-6 px-5 text-end">
              <small>Follow us:</small>
              <a class="text-body ms-3" href=""><i class="fab fa-facebook-f"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-twitter"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-linkedin-in"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-instagram"></i></a>
          </div>
      </div>

      <nav class="navbar navbar-expand-lg navbar-light py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
          <a href="../index.html" class="navbar-brand ms-4 ms-lg-0">
            <!-- <img src="../img/logo-re.png" alt="logo"> -->
            <H3 style="color:#503f3f">SNEHA</H3>
          </a>
          <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
              <div class="navbar-nav ms-auto p-4 p-lg-0">
                  <a href="../index.html" class="nav-item nav-link active">Home</a>
                  <a href="#" class="nav-item nav-link">Products</a>

                  <div class="nav-item dropdown">
          
                  </div>
                  
              </div>
              <div class="d-none d-lg-flex ms-2">
 
                  <a class="btn-sm-square bg-white rounded-circle ms-3" href="">
                    <small class="fa fa-user text-body"></small>
                </a>
              </div>
          </div>
      </nav>
  </div>
  <!-- Navbar End -->
  
<!-- left nav bar starts here -->
<div class="container" id="regster">
  <div class="row justify-content-left">
    <div class="col-md-2">
      <div class="card mt-5" >
        <div class="card-body"> 

            <div class="form-group">
              <a href="admin.html"><label for="name">Dashboard</label></a>
            </div>
            <hr>

            <div class="form-group">
              <label for="phone"><strong>Manage menu</strong></label>
            </div>
            <hr>
<!-- 
            <div class="form-group">
              <a href="orders.html"><label for="phone">Manage orders</label></a>
            </div>
            <hr>

            <div class="form-group">
              <a href="customers.html"><label for="phone">Customers</label></a>
            </div> -->
          </div>        
        </div>
      </div>
      <!-- left nav bar ends here -->

      <!-- Main content section starts here -->
      <div class="col-md-10" style="display: block; margin-top: 10px;">
        <div class="card mt-5" >
          <div class="card-body">


 
      <!-- Dashborad contentent starts here -->
      <div class="body">
      <div class="container1">

        <div class="container mt-5">
          <!-- Button to add new item -->
          <div class="row">
            <div class="col">
                <div class="mb-3">
                    <button class="btn btn-primary" id="addItemBtn" data-toggle="modal" data-target="#addItemModal">+ Add menu type</button>
                </div>
            </div>
            <div class="col">
                <div class="mb-3">
                    <button class="btn btn-primary" id="addItemBtn" data-toggle="modal" data-target="#addCategoryModal">+ Add menu category </button>
                </div>
            </div>
            <div class="col">
              <div class="mb-3">
                  <button class="btn btn-primary" id="addImageBtn" data-toggle="modal" data-target="#addImagesModal">+ Add Images </button>
              </div>
          </div>
          </div>
    
          <div class="container">
            <h1>Menu Options</h1>
            <table id="dataTable" class="table table-striped">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Category</th>
                  <th>Price</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- Data will be populated here dynamically -->
              </tbody>
            </table>
          </div>
          
     
          
    </div>
  </div> 
      <!-- Dashboard content list ends here -->

          </div>
        </div>
      </div>
      <!-- Main content section ends here -->
    </div>
  </div>
</div>

<!-- Modal for adding new items starts here -->
<div class="modal fade" id="addItemModal" tabindex="-1" role="dialog" aria-labelledby="addItemModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="addItemModalLabel">Add Menu type</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
            <form id="addItemForm">
                <div class="form-group">
                  <label for="itemName">Name</label>
                  <input type="text" class="form-control" id="itemName" name="itemName" required/>
                </div>
                <div class="form-group">
                  <label for="itemCategory2">Category</label>
                  <select class="form-control" id="itemCategory2" name="itemCategory2" required>
                    <option value="">Select Category</option>
                    <!-- Categories will be added here dynamically -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="itemPrice">Price</label>
                  <input type="number" class="form-control" id="itemPrice" name="itemPrice" required>
                </div>
                <div class="form-group">
                  <label for="itemIngredients">Ingredients</label>
                  <textarea class="form-control" id="itemIngredients" name="itemIngredients" rows="3"></textarea>
                </div>

                <div class="form-group">
                  <label for="itemPrice">Choose Image</label>
                  <input type="file" class="form-control" id="file" name="file" required>
                </div>

                <button type="submit" class="btn btn-primary">Save</button>
              </form>
              <div id="message2"></div>
          
          </div>
      </div>
  </div>
</div>
<!-- Modal for adding new items ends here -->


<!-- Modal for adding new Categories starts here -->
<div class="modal fade" id="addCategoryModal" tabindex="-1" role="dialog" aria-labelledby="addItemModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addItemModalLabel">Add Menu Category</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="addItemCategory" action="upload.php" method="post">
                    <div class="form-group">
                      <label for="itemDescription">Category</label>
                      <input type="text" class="form-control" id="itemDescription" placeholder="Add category name e.g., Sandwich" name="itemDescription" required>
                    </div>
                    <button type="submit"  class="btn btn-primary">Save</button>
                  </form>
                    <!-- Messages will be shown here -->
                    <br>
                  <div id="message"></div>
            </div>
        </div>
    </div>
  </div>
  <!-- Modal for adding categories ends here -->


  <!-- Modal for adding images -->
<div class="modal fade" id="addImagesModal" tabindex="-1" role="dialog" aria-labelledby="addItemModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="addItemModalLabel">Add images to the server</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form  method="post" action="upload.php" enctype="multipart/form-data">
                  <div class="form-group">
                    <label for="itemDescription">Images</label>
                    <input type="file" class="form-control" id="itemDescription" name="file[]" placeholder="Add all images you have used to the server">
                  </div>
                  <input type="submit"  class="btn btn-primary"></input>
                </form>
                  <!-- Messages will be shown here -->
                  <br>
                <div id="message"></div>
          </div>
      </div>
  </div>
</div>
<!-- Modal for adding categories ends here -->

  <!-- Modal for editing starts here -->
<div id="editModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
    <span class="close">&times;</span>
    <h2>Edit Option</h2>
     <form id="editForm">
      <!-- Input fields for editing -->
      <div class="form-group">
        <label for="editName">Name</label>
        <input type="text" class="form-control" id="editName" name="editName">
      </div>
      <div class="form-group">
        <label for="editCategory">Category</label>
        <input type="text" class="form-control" id="editCategory" name="editCategory">
      </div>
      <div class="form-group">
        <label for="editPrice">Price</label>
        <input type="text" class="form-control" id="editPrice" name="editPrice">
      </div>
      <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>
    </div>
    </div>
  </div>
</div>
<!-- Modal for editing ends here -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
      <div class="container py-5">
          <div class="row g-5">
              <div class="col-lg-3 col-md-6">
                  <h1 class="fw-bold text-primary mb-4">Sneha</h1>
                  <p>Savor the essence of culinary delight at Sneha Food Store – where every bite is a symphony of flavor!</p>
                  <div class="d-flex pt-2">
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-twitter"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-facebook-f"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-youtube"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-0" href=""><i class="fab fa-linkedin-in"></i></a>
                  </div>
              </div>
              <div class="col-lg-3 col-md-6">
                <h4 class="text-light mb-4">Address</h4>
                <p><i class="fa fa-map-marker-alt me-3"></i>UK,London,Westminister</p>
                <p><i class="fa fa-phone-alt me-3"></i>+44798747392</p>
                <p><i class="fa fa-envelope me-3"></i>xyz</p>
            </div>
              <div class="col-lg-3 col-md-6">
                  <h4 class="text-light mb-4">Quick Links</h4>
                  <a class="btn btn-link" href="">About Us</a>
                  <a class="btn btn-link" href="">Contact Us</a>
                  <a class="btn btn-link" href="">Our Services</a>
                  <a class="btn btn-link" href="">Terms & Condition</a>
                  <a class="btn btn-link" href="">Support</a>
              </div>
              <div class="col-lg-3 col-md-6">
                  <h4 class="text-light mb-4">Newsletter</h4>
                  <p>Subbscribe to our Newsletter</p>
                  <div class="position-relative mx-auto" style="max-width: 400px;">
                      <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                      <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                  </div>
              </div>
          </div>
      </div>
      <div class="container-fluid copyright">
          <div class="container">
              <div class="row">
                  <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                      &copy; <a href="#">Sneha</a>, All Right Reserved.
                  </div>

              </div>
          </div>
      </div>
  </div>
  <!-- Footer End -->
<script>
    document.getElementById('addItemCategory').addEventListener('submit', function(event) {
  event.preventDefault();

  var itemDescription = document.getElementById('itemDescription').value;



//   Validate user input to prevent SQL injection
  if (!itemDescription) {
    showMessage('Category name is required');
    return;
  }

  // AJAX request to save the category name
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '../server/save_category.php', true);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        var response = JSON.parse(xhr.responseText);
        showMessage(response.message);
      } else {
        showMessage('An error occurred. Please try again later.');
      }
    }
  };
  xhr.send('itemDescription=' + encodeURIComponent(itemDescription));
});

function showMessage(message) {
  document.getElementById('message').innerHTML = '<p>' + message + '</p>';
}

</script>

<script>
    // Populate categories dropdown
window.onload = function() {
  var categoryDropdown = document.getElementById('itemCategory2');
  var xhr2 = new XMLHttpRequest();
  xhr2.open('GET', '../server/categories.php', true);
  xhr2.onreadystatechange = function() {
    if (xhr2.readyState === XMLHttpRequest.DONE) {
      if (xhr2.status === 200) {
        var categories = JSON.parse(xhr2.responseText);
        categories.forEach(function(category) {
          var option = document.createElement('option');
          option.value = category;
          option.textContent = category;
          categoryDropdown.appendChild(option);
        });
      } else {
        console.error('Failed to fetch categories');
      }
    }
  };
  xhr2.send();
};

// // Handle form submission
// document.getElementById('addItemForm').addEventListener('submit', function(event) {
//   event.preventDefault();

//   var itemName = document.getElementById('itemName').value;
//   var itemCategory2 = document.getElementById('itemCategory2').value;
//   var itemPrice = document.getElementById('itemPrice').value;
//   var itemIngredients = document.getElementById('itemIngredients').value;

 
//   // var formData = {
//   //   itemName: itemName,
//   //   itemCategory: itemCategory2,
//   //   itemPrice: itemPrice,
//   //   itemIngredients: itemIngredients
//   // };

//   var xhr3 = new XMLHttpRequest();
//   xhr3.open('POST', 'saveitem.php', true);
//   xhr3.onreadystatechange = function() {
//     if (xhr3.readyState === XMLHttpRequest.DONE) {
//       if (xhr3.status === 200) {
//         var response = JSON.parse(xhr3.responseText);
//         showMessage(response.message);
//       } else {
//         showMessage('An error occurred. Please try again later.');
//       }
//     }
//   };
//   // xhr3.send(JSON.stringify(formData)); itemName
//   xhr3.send('itemName=' + encodeURIComponent(itemName));
// });

// function showMessage(message) {
//   document.getElementById('message2').innerHTML = '<p>' + message + '</p>';
// }










document.getElementById('addItemForm').addEventListener('submit', function(event) {
  event.preventDefault();

  var itemName = document.getElementById('itemName').value;
  var itemCategory2 = document.getElementById('itemCategory2').value;
  var itemPrice = document.getElementById('itemPrice').value;
  var itemIngredients = document.getElementById('itemIngredients').value;
  var file = document.getElementById('file').value;


  // AJAX request to save the category name
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'saveitem.php', true);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        var response = JSON.parse(xhr.responseText);
        showMessage(response.message);
      } else {
        showMessage('An error occurred. Please try again later.');
      }
    }
  };
  xhr.send( JSON.stringify({ itemName, itemCategory2, itemPrice, itemIngredients,file}));
});

function showMessage(message) {
  document.getElementById('message2').innerHTML = '<p>' + message + '</p>';
}

</script>

<!-- ===============================Table script==================================== -->
<script>

</script>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 <!-- JavaScript Libraries -->
 <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
 <script src="../lib/wow/wow.min.js"></script>
 <script src="../lib/easing/easing.min.js"></script>
 <script src="../lib/waypoints/waypoints.min.js"></script>
 <script src="../lib/owlcarousel/owl.carousel.min.js"></script>
 <script src="../js/main.js"></script>
 <script src="table.js"></script>

</body>
</html>
