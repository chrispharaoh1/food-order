<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>

  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
      <!-- Google Web Fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Lora:wght@600;700&display=swap" rel="stylesheet"> 
  
      <!-- Icon Font Stylesheet -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
  
      <!-- Libraries Stylesheet -->
      <link href="lib/animate/animate.min.css" rel="stylesheet">
      <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  
      <!-- Customized Bootstrap Stylesheet -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
  
      <!-- Template Stylesheet -->
      <link href="css/style.css" rel="stylesheet">

        <!-- React and babel links -->
      <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
      <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
      <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
      <style>
        #regster{
          margin-top: 90px;
        }
      </style>
</head>
<body style="background-image: url(img/background.PNG);  background-repeat: repeat-x;">

 <!-- Navbar Start -->
    <div class="container-fluid fixed-top px-0 wow fadeIn" data-wow-delay="0.1s">
      <div class="top-bar row gx-0 align-items-center d-none d-lg-flex">
          <div class="col-lg-6 px-5 text-start">
            <small><i class="fa fa-map-marker-alt me-2"></i> Zone I, Islamabad, Pakistan</small>
            <small class="ms-4"><i class="fa fa-envelope me-2"></i>xyz</small>
          </div>
          <div class="col-lg-6 px-5 text-end">
              <small>Follow us:</small>
              <a class="text-body ms-3" href=""><i class="fab fa-facebook-f"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-twitter"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-linkedin-in"></i></a>
              <a class="text-body ms-3" href=""><i class="fab fa-instagram"></i></a>
          </div>
      </div>

      <nav class="navbar navbar-expand-lg navbar-light py-lg-0 px-lg-5 wow fadeIn" data-wow-delay="0.1s">
          <a href="index.html" class="navbar-brand ms-4 ms-lg-0">
            <img src="img/logo-re.png" alt="logo">
          </a>
          <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
              <div class="navbar-nav ms-auto p-4 p-lg-0">
                  <a href="index.html" class="nav-item nav-link active">Home</a>
                  <a href="login.html" class="nav-item nav-link">Login</a>
                  <a href="register.html" class="nav-item nav-link">SignUp</a>
                  <div class="nav-item dropdown">
          
                  </div>
                  
              </div>
              <div class="d-none d-lg-flex ms-2">
 
                  <a class="btn-sm-square bg-white rounded-circle ms-3" href="">
                      <small class="fa fa-shopping-bag text-body"></small>
                  </a>
              </div>
          </div>
      </nav>
  </div>
  <!-- Navbar End -->

<div class="container" id="regster">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card mt-5" >
        <div class="card-header">
          Register
        </div>
        <div class="card-body">
          <!-- form starts here -->
        <div id="register">
          <form  id="register">
            <div class="form-group">
              <label for="name">Name</label>
              <input type="text" class="form-control" id="name" placeholder="Enter your name">
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" class="form-control" id="phoneNumber" placeholder="Enter your phone number">
            </div>
            <div class="form-group">
              <label for="email">Email address</label>
              <input type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input type="password" class="form-control" id="password" placeholder="Password">
            </div>
            </div>
 
          </form>
          </div>
          <!-- Form ends here -->
        </div>
      </div>
    </div>
  </div>
</div>


    <!-- Footer Start -->
    <div class="container-fluid bg-dark footer mt-5 pt-5 wow fadeIn" data-wow-delay="0.1s">
      <div class="container py-5">
          <div class="row g-5">
              <div class="col-lg-3 col-md-6">
                  <h1 class="fw-bold text-primary mb-4">Sneha</h1>
                  <p>Savor the essence of culinary delight at Sneha Food Store â€“ where every bite is a symphony of flavor!</p>
                  <div class="d-flex pt-2">
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-twitter"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-facebook-f"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-1" href=""><i class="fab fa-youtube"></i></a>
                      <a class="btn btn-square btn-outline-light rounded-circle me-0" href=""><i class="fab fa-linkedin-in"></i></a>
                  </div>
              </div>
              <div class="col-lg-3 col-md-6">
                  <h4 class="text-light mb-4">Address</h4>
                  <p><i class="fa fa-map-marker-alt me-3"></i>Zone I, Islamabad, Pakistan</p>
                  <p><i class="fa fa-phone-alt me-3"></i>+92 255 355</p>
                  <p><i class="fa fa-envelope me-3"></i>xyz</p>
              </div>
              <div class="col-lg-3 col-md-6">
                  <h4 class="text-light mb-4">Quick Links</h4>
                  <a class="btn btn-link" href="">About Us</a>
                  <a class="btn btn-link" href="">Contact Us</a>
                  <a class="btn btn-link" href="">Our Services</a>
                  <a class="btn btn-link" href="">Terms & Condition</a>
                  <a class="btn btn-link" href="">Support</a>
              </div>
              <div class="col-lg-3 col-md-6">
                  <h4 class="text-light mb-4">Newsletter</h4>
                  <p>Subbscribe to our Newsletter</p>
                  <div class="position-relative mx-auto" style="max-width: 400px;">
                      <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                      <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                  </div>
              </div>
          </div>
      </div>
      <div class="container-fluid copyright">
          <div class="container">
              <div class="row">
                  <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                      &copy; <a href="#">xyz</a>, All Right Reserved.
                  </div>

              </div>
          </div>
      </div>
  </div>
  <!-- Footer End -->

  <!-- REACT SCRIPT -->
  <script type="text/babel">
    // React component for form validation
   class ValidationForm extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        name: "",
        phoneNumber: "",
        email: "",
        password: "",
        nameValid: true,
        phoneValid: true,
        emailValid: true,
        passwordValid: true,
        showModal: false
      };
    }
  
    handleInputChange = event => {
      const { id, value } = event.target;
      this.setState(
        {
          [id]: value
        },
        () => {
          this.validateField(id, value);
        }
      );
    };
  
    // Validating each input field according to required standard
    validateField = (fieldName, value) => {

      let isValid = true;
      switch (fieldName) {
        case "name":
          const nameRegex = /^[A-Za-z ]{2,}$/;//This rejext restricts the user from inserting name of less than 2 characters. special characters not allowed
          isValid = nameRegex.test(value);
          this.setState({ nameValid: isValid });
          break;
        case "phoneNumber":
          const phoneRegex = /^\d{10}$/; //Validating the phone number tp contain 10 characters and not allowing special characters
          isValid = phoneRegex.test(value);
          this.setState({ phoneValid: isValid });
          break;
        case "email":
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; //Validating email to have all necessary information like @, ., and text
          isValid = emailRegex.test(value);
          this.setState({ emailValid: isValid });
          break;
        case "password":
          const passwordRegex = /^(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/; //this rejex validate the password to have atleast upper and lower case, a number, and atleast 8 chrater long
          isValid = passwordRegex.test(value);
          this.setState({ passwordValid: isValid });
          break;
        default:
          break;
      }
    };
  
  
  // Handiling form when register button is pressed
    handleSubmit = event => {
    event.preventDefault();
    const {nameValid, phoneValid, emailValid, passwordValid, name, phoneNumber, email, password } = this.state;
    if (nameValid && phoneValid && emailValid && passwordValid) {
      // Send form data to PHP backend
      fetch('register_form.php', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, phoneNumber, email, password }),
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Form submitted successfully');
        // Optionally, reset the form fields after successful submission
        this.setState({ showModal: true });

        this.setState({
          name: name,
          phoneNumber: phoneNumber,
          email: email,
          password: "",
          nameValid: true,
          phoneValid: true,
          emailValid: true,
          passwordValid: true
        });
      })
      .catch(error => {
        // console.error('There was a problem with your fetch operation:', error);
        alert("Opps, your email is already registered, please use another email!");
      });
    }
  };
  // Closing the modal
  closeModal = () => {
    this.setState({ showModal: false });
  };
  
  
    render() {
      const {nameValid, phoneValid, emailValid, passwordValid, showModal } = this.state;
      return (
        <div>
        <form onSubmit={this.handleSubmit}>

          <div className="form-group">
            <label htmlFor="name">Name:</label>
            <input
              type="text"
              className={`form-control ${nameValid ? "" : "is-invalid"}`}
              id="name"
              placeholder="Enter full name"
              value={this.state.name}
              onChange={this.handleInputChange}
              required
            />

            {!nameValid && (
              <div className="invalid-feedback">
                Please enter a valid name.
              </div>
            )}
          </div>

          <div className="form-group">
            <label htmlFor="phoneNumber">Phone Number:</label>
            <input
              type="text"
              className={`form-control ${phoneValid ? "" : "is-invalid"}`}
              id="phoneNumber"
              placeholder="Enter phone number"
              value={this.state.phoneNumber}
              onChange={this.handleInputChange}
              required
            />

            {!phoneValid && (
              <div className="invalid-feedback">
                Please enter a valid phone number.
              </div>
            )}
          </div>


          <div className="form-group">
            <label htmlFor="email">Email address:</label>
            <input
              type="email"
              className={`form-control ${emailValid ? "" : "is-invalid"}`}
              id="email"
              placeholder="Enter email"
              value={this.state.email}
              onChange={this.handleInputChange}
              required
            />

            {!emailValid && (
              <div className="invalid-feedback">
                Please enter a valid email address.
              </div>
            )}
          </div>

          <div className="form-group">
            <label htmlFor="password">Password:</label>
            <input
              type="password"
              className={`form-control ${passwordValid ? "" : "is-invalid"}`}
              id="password"
              placeholder="Enter password"
              value={this.state.password}
              onChange={this.handleInputChange}
              required
            />

            {!emailValid && (
              <div className="invalid-feedback">
                Please enter a valid password with atleast 8 charachers, Uppercase, Lowercase, special chraracter, and a digit.
              </div>
            )}
          </div>



          <button type="submit" class="btn btn-primary">
            Register
            </button>
        </form>
         <div className={`modal ${showModal ? 'show' : ''}`} style={{ display: showModal ? 'block' : 'none' }}>
           <div className="modal-dialog">
             <div className="modal-content">
               <div className="modal-header">
                <h5 className="modal-title">Success</h5>
                <button type="button" className="close" onClick={this.closeModal}>
                  <span>&times;</span>
                </button>
               </div>
               <div className="modal-body">
                <p>Your Account have been registered successfully!</p>
                <a href="login.html" className="btn btn-primary">Login</a>
               </div>
               <div className="modal-footer">
             
               </div>
             </div>
           </div>
         </div>
         <div className={`modal-backdrop fade ${showModal ? 'show' : ''}`} style={{ display: showModal ? 'block' : 'none' }}></div>
</div>
       

      );
    }
  }
  
  ReactDOM.render(<ValidationForm />, document.getElementById("register"));
  
  </script>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 <!-- JavaScript Libraries -->
 <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
 <script src="lib/wow/wow.min.js"></script>
 <script src="lib/easing/easing.min.js"></script>
 <script src="lib/waypoints/waypoints.min.js"></script>
 <script src="lib/owlcarousel/owl.carousel.min.js"></script>

</body>
</html>
